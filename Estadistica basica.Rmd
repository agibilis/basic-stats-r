---
title: "R Notebook"
output:
  html_document:
    df_print: paged
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 

```{r}
plot(cars)
```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file). 

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

----------------------------------

Aqui empiezan los apuntes de estadistica básica. 

```{r}
 x <- c(0.32,0.36,0.24,0.11,0.11,0.44,2.79,2.99,3.47,0.23,0.55, 3.21,4.02,0.23)
x
```
La media aritmetica o muestral
```{r}
mean(x)
```
el número de elementos es 
```{r}
length(x)
```
Media ajustada
Se elimina un porcentaje de los datos inferiores y el mismo porcentaje de los valores superiores.  Por lo tanto se intenta reducir el efecto de los valores extremos. En este caso eliminamos el 10% por encima y por debajo. 
```{r}
mean(x,trim=0.1)
```

Otra forma de localizar los datos es con los percentiles muestrales. El percentil de orden p es un valor que tiene por debajo el 100xp por ciento de datos y por encima el 100 x(1-p)
```{r}
sort(x)
```
Para saber cuantos son menores de 1
```{r}
Fn = ecdf(x)
Fn(1)
```
La proporcion de datos que son inferioresa 1 es 0.6428571. el valor 1 es el percentil de orden 0.6428571 de  los datos.

La mediana muestral esel percentil de orden 0.5 

```{r}
median(x)
```
El percentil p=0,25 se le concoce como cuartil inferior y al percentil 0,75 se le conoce como cuartil superior
```{r}
quantile(x,probs=0.25)
quantile(x,probs=0.50)
quantile(x,probs=0.75)
quantile(x,probs = c(0.25,0.75))
```
Ahora queremos saber la dispersion de nuestros datos 
```{r}
var(x)
sd(x)
```
El rango es el valor maximo y minimo de la muestra
```{r}
range(x)

c(min(x),max(x))
max(x)-min(x)
diff(range(x))
```
El rango intercuartilico es la diferencia entre los percentiles 0.75 y 0.25 y es una medida más robusta. 
```{r}
IQR(x)iqr
```

En resumen 
```{r}
summary(x)
```

Ejercicio

43.86 33.14 37.04 29.29 21.49 34.98 18.09 18.84 36.20 27.82 22.86 32.11
 22.45 38.22 44.55 39.03 33.25 18.27 34.44 24.88 24.58 42.12 30.04 19.58
 34.00 32.98 28.35 25.75 22.78 15.88 38.97 13.47 21.42 34.19 16.49 15.17
 31.42 17.00 37.06 30.35 19.65 34.62 16.48 19.42 42.89 23.89 29.26 45.64
 32.29 22.96 29.60 39.98 21.86 18.25 35.96 30.57 40.79 17.21 27.07 28.56
 15.59 23.51 18.78 37.72 14.40 28.40 43.17 22.65 27.85 41.56 42.44 16.57
 23.55 29.66 20.72 28.28 42.10 13.76 27.27 19.69 20.18 23.80 14.37 22.02
 29.06 34.52 21.91 19.98 16.24 44.56 18.54 35.96 30.12 32.82 45.76 28.75
 32.01 19.39 23.76 41.72 32.90 31.47 15.04 12.74 44.11 38.65 27.18 35.52
 15.70 38.95 30.59 15.43 45.60 14.98 23.11 22.11 23.03 19.91 34.95 16.05
 
 leer los datos calcular media mediana, media recortada con un aproporción del 0,05, los percentiles de orden 0,1 y 0,9


```{r}
datos <- c(t(read.table("~/OneDrive/Estadistica/ejercicio2.txt",sep="", quote="")))
datos

summary(datos)
```
 
```{r}
mean(datos)
median(datos)
mean(datos,trim=0.05)
quantile(datos,probs=0.1)
quantile(datos,probs=0.9)
```

si se añaden los siguientes valores veremos como afecta a las distintas medidas para estudiar que robusto es el metodo de calculo

```{r}
datos2<-c(datos,123.34,78.23,89.6,1.2)
datos2
```
```{r}
mean(datos2)
median(datos2)
mean(datos2,trim=0.05)
quantile(datos2,probs=0.1)
quantile(datos2,probs=0.9)
```
La media tiene mucha variacion al introducir nuevos valores extremos. 
La mediana varia poco al introducir un numero limitado de valores
La media recortada al eliminar la parte superior de los extremos limita la variacion de los datos. Igualmente los percentiles de orden 0.1 y 0,9 eliminan parte de los extremos añadidos


...................................

Las muestras de aguas se tomaron en dos localizaciones de la albufera. 8 primeras en Catarroja y las 6 ultimas en el Palmar. 

```{r}
y<-c(1,1,1,1,1,1,1,1,2,2,2,2,2,2)

```
estamos ahora contando las distintas observaciones es lo mismo que la frecuencia. Contamos el número de datos que se ha observado en cada zona. Obtenemos de un modo simple la frecuencia absoluta.
```{r}
table(y)
```
Si dividimos las frecuencias absolutas por el número total de datos obtenemos las frecuencias absolutas.
```{r}
prop.table(table(y))
```

Podemos obtener las frecuencias relaticva dividiendo los conteos o frecuencias por esta suma. 


```{r}
table(y)/sum(table(y))
```
```{r}
barplot(table(y))
barplot(prop.table((table(y))))
```

```{r}
pie(table(y))
```
```{r}
hist(x)
```
Se puede cambiar el numero de clases. Estos graficos son muy sensibles a la eleccion del usuario por lo que no es muy recomendable aunque si extendido. 

```{r}
hist(x,breaks=10)
```

Mediante el diagrama de cajas o Boxplot se engloba la informacion de los cuartiles que se corresponden con los bordes superior e inferior de la caja. La linea interior destacada representa la mediana y por encima y debajo de la caja se muestran los extremos de los datos maximo y minimo. 

```{r}
x1=c(x,c(7,9))
```
```{r}
boxplot(x)
```
```{r}
boxplot(x1)
```

Podemos comparar muestras de forma grafica y muy intuitiva mediante los diagramas de bloques

```{r}
boxplot(x~y)
```

Estimadores Kernel de la densidad

el estimador 
```{r}
plot(density(x))
```
Función de distribución muestral (duncion acumulativa)

Para cada punto x consideramos el conjunto formado por todos los datos xi que son menores o iguales que x. Contamos el número de puntos en este conjunto (su cardinal) y lo dividimos por el total de datos. En resumen, Fn(x) nos da la proporción de datos que son menores o iguales que x. Y esto lo consideramos para todos los valores de x posibles.

```{r}
ecdf(x)
plot(ecdf(x))
```
Otra forma de sacarlo es 
```{r}
library(Hmisc)
Ecdf(x)
```

Ahora buscaremos datos anomalos 

Vamos a añadir unos datos anomalos 
```{r}

x2=c(x,c(0,9,14))
x2
```
* Dados los datos calculamos su media y desviación típica muestrales: x ̄ y s. Se entiende por dato anómalo aquél que está fuera del intervalo [ x ̄ − 3 s , x ̄ − 3 s ] , es decir, que o bien es extremo porque es menor que x ̄ − 3s o bien es extremo porque es mayor que x ̄ + 3s.

Y veamos si son anómalos en el sentido que acabamos de definir.

```{r}
x2[x2 < mean(x2) - 3 * sd(x2)]
```
Veamos el valor añadido por arriba
```{r}
x2[x2 > mean(x2) + 3 * sd(x2)]
```
El segundo procedimiento utiliza los cuartiles, que se denotan por q25 y q75 los percentiles 25% y 75% o cuartil inferrior y superior
                Si IQR=q75-q25
 [q25   -1,5xIQR, q75 + 1,5xIQR]
 
```{r}
(lw = quantile(x2,probs=0.25)-1.5 * IQR(x2))
```
 
```{r}
(up = quantile(x2,probs=0.75)+1.5 * IQR(x2))
```
Veamos si hay puntos por debajo
```{r}
x2[x2<lw]
```
no hay numeros por debajo.

```{r}
x2[x2>up]
```

Si vemos que hay 2 por encima

----------------------------------------------

Realizamos varios histogramas cambiando el numero de clases

```{r}
hist(x)
hist(x,breaks=2)
hist(x,breaks=3)
hist(x,breaks=5)
hist(x,breaks=15)
```

Como puede apreciarse el histograma el funcion del número de clases nos muestra un dibujo distinto. Este es un claro ejemplo de que no es un buen metodo. 

Si queremos representar el estimador kernel 

```{r}
plot(density(x))
# doblamos el ancho de banda
plot(density(x,adjust=2))
# dividimos el ancho de banda
plot(density(x,adjust=0.5))
```

Transformacion lineal ortogonal

Las componentes principales definen un nuevo sistema de ejes coordenados sobre los que realizar un una nueva proyeccion de los valores originales. 

X e Y  son dos vectores columna y A es una matriz  si Y = A X se dice que A es la matriz de transformacion en Y .  

```{r}
A1 <- matrix(c(0.61625,0.78755,-0.78755,0.61625),ncol=2)
A2 <- matrix(c(0.7071,0.7071,-0.7071,0.7071),ncol=2)

A1
A2
# si las multiplicamos por su transformada %*% obtenemos la I 

A1%*%t(A1)

A2%*%t(A2)
```


